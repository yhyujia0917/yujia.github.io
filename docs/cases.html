<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æœå‹™æ¡ˆä¾‹å±•ç¤º</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="stylesheet" href="css/cases-style.css" />

  <style>
    html, body { height: 100%; }
    *, *::before, *::after { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Noto Sans TC', 'Segoe UI', sans-serif;
      color: #f0f0f0;
      background: #1e1f26;
    }
    body::before{
      content:"";
      position: fixed;
      inset: 0;
      background: url('img/ä½å®¶/ä½å®¶01.jpg') center / cover no-repeat;
      z-index: 0;
      pointer-events: none;
      will-change: transform;
    }
    .page{ position: relative; z-index: 1; }
    @media (max-width: 1024px){ body::before{ background-attachment: scroll; } }

    .top-nav { background-color:#333; color:#fff; padding:1rem; position:sticky; top:0; z-index:1000; }
    .nav-container { max-width:1200px; margin:0 auto; display:flex; justify-content:space-between; align-items:center; }
    .logo { color:#fff; text-decoration:none; font-size:1.2rem; font-weight:bold; }
    .logo .mobile-only{ display:none; }
    .logo .desktop-only{ display:inline; }
    .hamburger{ font-size:1.8rem; background:none; color:#fff; border:none; cursor:pointer; display:none; top:50%; transform:translateY(-50%); }
    .nav-links{ list-style:none; display:flex; gap:1.5rem; margin:0; padding:0; }
    .nav-links li a{ color:#fff; text-decoration:none; font-size:1rem; transition:color .3s ease; }
    .nav-links li a:hover{ color:#f0c040; }
    @media (max-width:768px){
      .hamburger{ display:block; }
      .nav-links{ position:absolute; top:60px; left:0; right:0; background:#333; flex-direction:column; align-items:center; display:none; padding:1rem 0; }
      .nav-links.open{ display:flex; }
      .logo .desktop-only{ display:none; }
      .logo .mobile-only{ display:inline; }
    }

    :root{ --container:1200px; --nav-h:64px; --radius:12px; --gap:24px; }
    main.site-main{ flex:1; padding:32px 16px 56px; }
    .cases{
      max-width:var(--container); margin:0 auto;
      background:rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.06);
      border-radius:var(--radius);
      padding:32px 16px 28px;
    }
    .cases__title{ text-align:center; margin:0 0 24px; }
    p, h1 { line-height:1.7; letter-spacing:.5px; word-spacing:2px; }

    .grid{ display:grid; gap:var(--gap); grid-template-columns:repeat(12,1fr); }
    .card{
      grid-column:span 4;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius); overflow:hidden; cursor:pointer;
      transition:transform .2s, box-shadow .2s, border-color .2s;
    }
    .card:hover{ transform:translateY(-2px); box-shadow:0 10px 30px rgba(0,0,0,.35); border-color:rgba(255,255,255,.18); }
    .card__img{ width:100%; aspect-ratio:4/3; object-fit:cover; display:block; }
    .card__body{ padding:16px; }
    .card__title{ margin:0 0 8px; font-size:1.05rem; }
    .card__desc{ margin:0; opacity:.95; }

    /* é è¦½æ–‡å­—ï¼šé™åˆ¶è¡Œæ•¸ + çœç•¥è™Ÿ */
    .card__desc--preview{
      display:-webkit-box;
      -webkit-box-orient:vertical;
      -webkit-line-clamp:2; /* å¡ç‰‡é è¦½æœ€å¤šå…©è¡Œ */
      overflow:hidden;
      line-height:1.6;
      color:#ddd;
      display: -webkit-box;
     display: box; /* æ¨™æº–å±¬æ€§ï¼šæŸäº›æ–°ç‰ˆæœ¬ç€è¦½å™¨æ”¯æ´ */
      -webkit-box-orient: vertical;
      box-orient: vertical; /* æ¨™æº–å±¬æ€§ */
  
      -webkit-line-clamp: 2; /* Webkit å°ˆç”¨ï¼šChrome, Safari */
     line-clamp: 2; /* æ¨™æº–å±¬æ€§ï¼šFirefox ç­‰æ–°ç€è¦½å™¨é–‹å§‹æ”¯æ´ */
  
      overflow: hidden;
     text-overflow: ellipsis;
     line-height: 1.6;
     color: #ddd;
    }
    @media (max-width:640px){
      .card__desc--preview{ -webkit-line-clamp:3;line-clamp: 3; } /* æ‰‹æ©Ÿæœ€å¤šä¸‰è¡Œ */
    }

    @media (max-width:1024px){ .card{ grid-column:span 6; } }
    @media (max-width:640px){ .card{ grid-column:span 12; } }

    #backToTop{
      position:fixed; bottom:40px; right:40px; display:none;
      font-size:1.5rem; padding:10px 15px; background:#333; color:#fff;
      border:none; border-radius:50%; cursor:pointer; z-index:1000;
    }
    #backToTop.show{ display:block; }

    .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:1200; }
    .modal.is-open{ display:flex; }
    .modal__backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.8); z-index:0; }
    .modal__dialog{
      position:relative; z-index:1; width:min(92vw, 840px);
      background:#222; border-radius:12px; padding:20px 20px 24px;
      border:1px solid rgba(255,255,255,.06);
    }
    .modal__close{ position:absolute; top:10px; right:14px; font-size:1.8rem; color:#fff; background:none; border:0; cursor:pointer; z-index:3; }
    .modal__title{ margin:14px 0 6px; }
    .modal__desc{ margin:0 0 6px; opacity:.95; }

    .swiper{ width:100%; height:auto; position:relative; }
    .swiper-slide{ display:flex; justify-content:center; align-items:center; }
    .swiper-slide img{ width:100%; max-height:420px; object-fit:contain; }
    .swiper-button-next, .swiper-button-prev, .swiper-pagination{ z-index:2; }

    .footer{ background:#f0f0f0; padding:1rem; text-align:center; font-size:.9rem; color:#333; }
    .footer p{ font-size:clamp(12px, 2vw, 16px); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .swiper, .swiper-wrapper, .swiper-slide {
  height: auto;
  }
  .swiper-slide img {
     width: 100%;
     height: auto; /* è®“åœ–ç‰‡é«˜åº¦ä¾ç…§æ¯”ä¾‹è®ŠåŒ– */
     max-height: 75vh; /* é¿å…åœ–ç‰‡éé«˜ */
     object-fit: contain;
     display: block;
  }
  </style>
</head>

<body>
  <div class="page">
    <button id="backToTop" title="å›åˆ°é ‚éƒ¨">â¬†</button>

    <nav class="top-nav">
      <div class="nav-container">
        <a href="index.html" class="logo"><span class="mobile-only">è£•å‚¢å®¤å…§è£ä¿®æœ‰é™å…¬å¸</span></a>
        <button class="hamburger" id="hamburger" aria-label="é–‹å•Ÿé¸å–®">â˜°</button>
        <ul class="nav-links" id="navMenu">
          <li><a href="index.html">é¦–é </a></li>
          <li><a href="about.html">é—œæ–¼æˆ‘å€‘</a></li>
          <li><a href="services.html">æœå‹™é …ç›®</a></li>
          <li><a href="cases.html" aria-current="page">æœå‹™æ¡ˆä¾‹</a></li>
          <li><a href="contact.html">è¯çµ¡æˆ‘å€‘</a></li>
          <li><a href="https://www.1111.com.tw/corp/67789982" target="_blank" rel="noopener">åŠ å…¥æˆ‘å€‘</a></li>
        </ul>
      </div>
    </nav>

    <main class="site-main" id="mainContent" tabindex="-1">
      <section class="cases" aria-labelledby="casesTitle">
        <h1 class="cases__title" id="casesTitle">æœå‹™æ¡ˆä¾‹ç¸½è¦½</h1>
        <div class="grid" id="caseGrid"></div>
      </section>
    </main>

    <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc" hidden>
      <div class="modal__backdrop" data-close="backdrop"></div>
      <div class="modal__dialog" tabindex="-1">
        <button class="modal__close" id="modalClose" aria-label="é—œé–‰">Ã—</button>
        <div class="swiper">
          <div class="swiper-wrapper"></div>
          <div class="swiper-pagination"></div>
          <div class="swiper-button-next" aria-label="ä¸‹ä¸€å¼µ"></div>
          <div class="swiper-button-prev" aria-label="ä¸Šä¸€å¼µ"></div>
        </div>
        <h2 class="modal__title" id="modalTitle"></h2>
        <p class="modal__desc" id="modalDesc"></p>
      </div>
    </div>

    <footer class="footer">
      <p class="center-text">ç‰ˆæ¬Šæ‰€æœ‰ Â© è£•å‚¢å®¤å…§è£ä¿®æœ‰é™å…¬å¸ï½œDesigned by è¦ç•™å„€ç¿° ç¶²é è¨­è¨ˆ</p>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

  <script>
    // æ¼¢å ¡é¸å–®
    document.getElementById("hamburger").addEventListener("click", function () {
      const menu = document.getElementById("navMenu");
      const open = menu.classList.toggle("open");
      this.setAttribute("aria-expanded", open ? "true" : "false");
    });
    // å›é ‚
    window.addEventListener('scroll', function () {
      const btn = document.getElementById("backToTop");
      btn.classList.toggle("show", (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300));
    }, { passive: true });
    document.getElementById("backToTop").onclick = function () {
      window.scrollTo({ top: 0, behavior: "smooth" });
    };
  </script>

  <!-- æœå‹™æ¡ˆä¾‹ï¼ˆç§æœ‰ä½œç”¨åŸŸï¼‰ -->
  <script>
  (function () {
    const CASES = [
      {
        title:"ğŸ”¹ å» æˆ¿",
        category:"factory",
        preview:"æå‡ç”Ÿç”¢æ•ˆç‡èˆ‡å®‰å…¨ï¼Œå®Œæ•´å‹•ç·šèˆ‡ç©ºé–“æ•´åˆã€‚",
        desc:"æœ¬æ¡ˆé‡å°å¤§å‹å» æˆ¿åšæ•´é«”è¦åŠƒï¼ŒåŒ…å«å‹•ç·šè¨­è¨ˆã€å®‰å…¨æ€§æå‡èˆ‡ä½œæ¥­å€æœ€ä½³åŒ–ï¼Œè®“æµç¨‹æ›´é †æš¢ä¸¦é™ä½é¢¨éšªã€‚",
        images:["img/å» æˆ¿/å» æˆ¿01.jpg","img/å» æˆ¿/å» æˆ¿02.jpg","img/å» æˆ¿/å» æˆ¿03.jpg","img/å» æˆ¿/å» æˆ¿04.jpg","img/å» æˆ¿/å» æˆ¿05.jpg","img/å» æˆ¿/å» æˆ¿06.jpg"]
      },
      {
        title:"ğŸ”¹ å­¸æ ¡",
        category:"school",
        preview:"å„ªåŒ–æ•™å®¤èˆ‡å…¬å…±å€åŸŸï¼Œæ‰“é€ èˆ’é©å®‰å…¨çš„å­¸ç¿’ç’°å¢ƒã€‚",
        desc:"é‡æ–°é…ç½®æ•™å®¤ã€ç…§æ˜èˆ‡é€šé¢¨ï¼›å…¼é¡§å®‰å…¨æ€§èˆ‡ä¾¿åˆ©æ€§ï¼Œç‡Ÿé€ èˆ’é©ã€å¯¦ç”¨çš„å­¸ç¿’ç©ºé–“ã€‚",
        images:["img/å­¸æ ¡/å­¸æ ¡01.jpg","img/å­¸æ ¡/å­¸æ ¡02.jpg","img/å­¸æ ¡/å­¸æ ¡03.jpg","img/å­¸æ ¡/å­¸æ ¡04.jpg","img/å­¸æ ¡/å­¸æ ¡05.jpg"]
      },
      {
        title:"ğŸ”¹ ä½å®¶",
        category:"home",
        preview:"çµåˆæ”¶ç´èˆ‡å‹•ç·šï¼Œç¾æ„Ÿèˆ‡æ©Ÿèƒ½ä¸¦é‡çš„å±…å®¶ç©ºé–“ã€‚",
        desc:"ä»¥èˆ’é©èˆ‡å¯¦ç”¨ç‚ºæ ¸å¿ƒï¼Œæ•´åˆæ”¶ç´è¨­è¨ˆã€å‹•ç·šèˆ‡æè³ªè‰²å½©ï¼Œæä¾›æº«é¦¨ä¾¿åˆ©çš„å±…ä½é«”é©—ã€‚",
        images:["img/ä½å®¶/ä½å®¶01.jpg","img/ä½å®¶/ä½å®¶02.jpg","img/ä½å®¶/ä½å®¶03.jpg","img/ä½å®¶/ä½å®¶04.jpg","img/ä½å®¶/ä½å®¶05.jpg"]
      },
      {
        title:"ğŸ”¹ é†«ç™‚é™¢æ‰€",
        category:"medical",
        preview:"æ•´åˆå€™è¨ºã€è¨ºé–“èˆ‡ç„¡éšœç¤™å‹•ç·šï¼Œæå‡å°±è¨ºæ•ˆç‡ã€‚",
        desc:"ä»¥é†«ç™‚æµç¨‹ç‚ºæ ¸å¿ƒï¼Œå„ªåŒ–å€™è¨ºå€ã€è¨ºç™‚å®¤èˆ‡ç„¡éšœç¤™è¨­æ–½ï¼Œæå‡æ•ˆç‡èˆ‡èˆ’é©åº¦ã€‚",
        images:["img/é†«é™¢/é†«é™¢01.jpg","img/é†«é™¢/é†«é™¢02.jpg","img/é†«é™¢/é†«é™¢03.jpg","img/é†«é™¢/é†«é™¢04.jpg","img/é†«é™¢/é†«é™¢05.jpg"]
      },
      {
        title:"ğŸ”¹ è¾¦å…¬å®¤",
        category:"office",
        preview:"é–‹æ”¾å¼å·¥ä½œå€ã€æœƒè­°å®¤èˆ‡ä¼‘æ†©å€ï¼Œå¼·åŒ–å”ä½œæ•ˆç‡ã€‚",
        desc:"é‡å¡‘å‹•ç·šèˆ‡åˆ†å€ï¼Œçµåˆæœƒè­°å”ä½œèˆ‡å“¡å·¥ä¼‘æ†©ç©ºé–“ï¼Œæ‰“é€ æ•ˆç‡èˆ‡äº’å‹•å…¼å…·çš„è¾¦å…¬ç’°å¢ƒã€‚",
        images:["img/è¾¦å…¬å®¤/è¾¦å…¬å®¤01.jpg","img/è¾¦å…¬å®¤/è¾¦å…¬å®¤02.jpg","img/è¾¦å…¬å®¤/è¾¦å…¬å®¤03.jpg","img/è¾¦å…¬å®¤/è¾¦å…¬å®¤04.jpg"]
      },
      {
        title:"ğŸ”¹ å¯¦é©—å®¤",
        category:"laboratory",
        preview:"é«˜è¦æ ¼å®‰å…¨èˆ‡é€šé¢¨è¨­è¨ˆï¼Œæå‡ç ”ç©¶æ•ˆèƒ½ã€‚",
        desc:"é‡é»åœ¨æ–¼å®‰å…¨é˜²è­·ã€é€šé¢¨èˆ‡è¨­å‚™é…ç½®ï¼Œæä¾›ç©©å®šå¯é çš„ç ”ç©¶ç©ºé–“ã€‚",
        images:["img/å¯¦é©—å®¤/å¯¦é©—å®¤01.jpg","img/å¯¦é©—å®¤/å¯¦é©—å®¤02.jpg","img/å¯¦é©—å®¤/å¯¦é©—å®¤03.jpg","img/å¯¦é©—å®¤/å¯¦é©—å®¤04.jpg","img/å¯¦é©—å®¤/å¯¦é©—å®¤05.jpg"]
      },
      {
        title:"ğŸ”¹ ç‰¹ç´„ç­–ç•¥è¯ç›Ÿ",
        category:"partner",
        preview:"åˆä½œå¤¥ä¼´è³‡è¨Šèˆ‡è¯ç›Ÿå°ˆæ¡ˆå°å¤–å±•ç¤ºã€‚",
        desc:"ä»‹ç´¹åˆä½œå» å•†èˆ‡ç­–ç•¥è¯ç›Ÿå¤¥ä¼´ï¼ŒåŒ…å«å°ˆæ¡ˆé€£çµèˆ‡åˆä½œå…§å®¹ã€‚å¤–éƒ¨é€£çµï¼šhttps://www.threepower.com.tw/index_tw.php",
        images:["img/å» å•†/å» å•†01.jpg","img/å» å•†/å» å•†02.jpg","img/å» å•†/å» å•†03.jpg","img/å» å•†/å» å•†04.jpg","img/å» å•†/å» å•†05.jpg"]
      }
    ];

    // å¡ç‰‡æ¸²æŸ“ï¼šå¤–å±¤ç”¨ previewï¼Œæ²’æœ‰å°±è‡ªå‹•æˆªå– desc å‰ 80 å­—
    const grid = document.getElementById('caseGrid');
    grid.innerHTML = CASES.map((c,i)=>{
      const short = (c.preview && c.preview.trim())
        ? c.preview.trim()
        : (String(c.desc||'').trim().slice(0,80) + (String(c.desc||'').length>80 ? 'â€¦' : ''));
      return `
        <article class="card" data-index="${i}" tabindex="0" aria-labelledby="card-title-${i}">
          <img class="card__img" src="${c.images[0]}" alt="æ¡ˆä¾‹é è¦½ï¼š${c.title}" loading="lazy">
          <div class="card__body">
            <h3 class="card__title" id="card-title-${i}">${c.title}</h3>
            <p class="card__desc card__desc--preview">${short}</p>
          </div>
        </article>
      `;
    }).join('');

    // Modal + Swiper
    const modal = document.getElementById('modal');
    const modalDialog = modal.querySelector('.modal__dialog');
    const modalClose = document.getElementById('modalClose');
    const swiperEl = modal.querySelector('.swiper');
    let swiper;

    function mountSlides(images, title){
      const slides = images.map(src => `<div class="swiper-slide"><img src="${src}" alt="${title} åœ–ç‰‡" loading="lazy"></div>`);
      const paginationEl = modal.querySelector('.swiper-pagination');
      const nextEl = modal.querySelector('.swiper-button-next');
      const prevEl = modal.querySelector('.swiper-button-prev');

      if(!swiper){
        swiper = new Swiper(swiperEl, {
          autoHeight: true,
          loop: true,
          pagination: { el: paginationEl },
          navigation: { nextEl, prevEl }
        });
        swiper.appendSlide(slides);
      }else{
        swiper.removeAllSlides();
        swiper.appendSlide(slides);
        swiper.updateSlides();
        swiper.update();
        swiper.navigation.update();
        swiper.pagination.render();
        swiper.pagination.update();
        swiper.slideToLoop(0, 0);
      }
    }

    function openModalByIndex(index){
      const item = CASES[index];
      if (!item) return;
      modal.hidden = false;
      modal.classList.add('is-open');
      document.getElementById('modalTitle').textContent = item.title;
      document.getElementById('modalDesc').textContent = item.desc; // å…§å±¤é¡¯ç¤ºå®Œæ•´æè¿°
      mountSlides(item.images, item.title);
      modalDialog.focus();
      document.addEventListener('keydown', trapFocus);
    }

    // å¡ç‰‡é»æ“Š / Enter
    grid.addEventListener('click', (e)=>{
      const card = e.target.closest('.card');
      if(card) openModalByIndex(Number(card.dataset.index));
    });
    grid.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter'){
        const card = e.target.closest('.card');
        if(card) openModalByIndex(Number(card.dataset.index));
      }
    });

    function closeModal(){
      modal.classList.remove('is-open');
      modal.hidden = true;
      document.removeEventListener('keydown', trapFocus);
      const main = document.getElementById('mainContent');
      if(main) main.focus({ preventScroll:true });
    }
    modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', (e)=>{ if(e.target.dataset.close === 'backdrop') closeModal(); });
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && modal.classList.contains('is-open')) closeModal(); });

    function trapFocus(e){
      if(e.key !== 'Tab' || !modal.classList.contains('is-open')) return;
      const focusables = modalDialog.querySelectorAll('a, button, textarea, input, select, [tabindex]:not([tabindex="-1"])');
      const first = focusables[0];
      const last = focusables[focusables.length - 1];
      if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
      else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
    }

    /* è‡ªå‹•é–‹å•Ÿï¼ˆç›¸å®¹ ?open= æˆ– ?category=ï¼‰ */
    window.addEventListener('DOMContentLoaded', () => {
      const params = new URLSearchParams(location.search);
      const key = (params.get('open') || params.get('category') || '').toLowerCase();
      if (!key) return;
      const idx = CASES.findIndex(c => (c.category || '').toLowerCase() === key);
      if (idx > -1) {
        setTimeout(() => openModalByIndex(idx), 0);
      } else {
        console.warn('æ‰¾ä¸åˆ°åˆ†é¡ï¼š', key, 'å¯ç”¨ï¼š', CASES.map(c=>c.category).join(', '));
      }
    });
  })();
  </script>
</body>
</html>
